!function(o){var a={};function e(d){if(a[d])return a[d].exports;var r=a[d]={i:d,l:!1,exports:{}};return o[d].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=o,e.c=a,e.d=function(o,a,d){e.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:d})},e.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(a,"a",a),a},e.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},e.p="/",e(e.s=2)}({"0ujA":function(o,a){var e={bad_request:"O pagamento não pode ser processado",5003:"falha de comunicação com a instituição financeira",10000:"bandeira inválida",10001:"número do cartão inválido",10002:"data no formato inválido",10003:"código de segurança inválido",10004:"cvv obrigatório",10006:"código de segurança inválido",53004:"quantidade de ítens inválido",53005:"moeda obrigatória",53006:"moeda inválida",53007:"tamanho do campo referência inválido",53008:"url de notificação inválida",53009:"tamanho da url de notificação inválida",53010:"email do comprador inválido.",53011:"email do comprador inválido",53012:"tamanho do campo email do comprador inválido",53013:"nome do comprador obrigatório",53014:"nome do comprador inválido",53015:"tamanho do campo nome do comprador inválido",53017:"cpf do comprador inválido",53018:"código de área do telefone inválido",53019:"tamanho do campo código de área do telefone inválido",53020:"telefone obrigatório",53021:"telefone inválido",53022:"CEP obrigatório",53023:"CEP inválido",53024:"rua do endereço obrigatório",53025:"rua do endereço inválido",53026:"número do endereço obrigatório",53027:"número do endereço inválido",53028:"complemento do endereço inválido",53029:"bairro do endereço obrigatório",53030:"bairro do endereço inválido",53031:"cidade do endereço obrigatória",53032:"cidade do endereço inválida",53033:"estado do endereço obrigatório",53034:"estado do endereço inválido",53035:"país do endereço obrigatório.",53036:"país do endereço inválido",53037:"token do cartão de crédito obrigatório",53038:"quantidade de parcelas obrigatória",53039:"quantidade de parcelas inválida",53040:"valor da parcela obrigatória",53041:"valor da parcela inválida",53042:"portador do cartão obrigatório",53043:"portador do cartão inválido",53044:"tamanho do campo portador do cartão inválido",53045:"CPF do portador do cartão obrigatório",53046:"CPF do portador do cartão inválido",53047:"data de nascimento do portador do cartão obrigatório",53048:"data de nascimento do portador do cartão inválido",53049:"código de área do portador do cartão obrigatório",53050:"código de área do portador do cartão inválido",53051:"telefone do portador do cartão obrigatório",53052:"telefone  do portador do cartão inválido",53053:"CEP do portador do cartão obrigatório",53054:"CEP do portador do cartão inválido",53055:"rua do portador do cartão obrigatório",53056:"rua do portador do cartão inválido",53057:"número do endereço do portador do cartão obrigatório",53058:"número do endereço do portador do cartão inválido",53059:"tamanho do campo complemento do endereço do portador do cartão inválido",53060:"bairro do portador do cartão obrigatório",53061:"tamanho do campo bairro do portador do cartão inválido",53062:"cidade do portador do cartão obrigatório",53063:"tamanho do campo cidade do portador do cartão inválido",53064:"estado do portador do cartão obrigatório",53065:"estado do portador do cartão inválido",53066:"país do portador do cartão obrigatório",53067:"tamanho do campo país do portador do cartão inválido",53068:"tamanho do email do vendedor inválido",53069:"email do vendedor inválido",53070:"código do ítem obrigatório",53071:"tamanho do código do ítem inválido",53072:"descrição do ítem obrigatório",53073:"tamanho do campo ítem inválido",53074:"quantidade de ítens obrigatória",53075:"quantidade de ítens fora do limite",53076:"quantidade de ítens inválido",53077:"montante do ítem obrigatório",53078:"montante do ítem inválido.",53079:"montante fora do limite",53081:"comprador é igual ao vendedor",53084:"vendedor inválido, verifique se é uma conta com status de vendedor",53085:"método de pagamento indisponível",53086:"montante total acima do limite do cartão",53087:"dados do cartão inválidos",53091:"hash do comprador inválido",53092:"bandeira do cartão não aceita",53095:"tipo de entrega inválido",53096:"custo de entrega inválido",53097:"custo da entrega fora do limite",53098:"valor total é negatívo",53099:"montante extra inválido.",53101:"modo de pagamento inválido, valores válidos são default e gateway",53102:"método de pagamento inválido, valores válidos são creditCard, boleto e eft",53104:"custo de entrega informado, endereço de entrega deve ser completo",53105:"informações do comprador informado, email também deve ser informado",53106:"portador do cartão incompleto",53109:"endereço do comprador informado, email do comprador também deve ser informado",53110:"banco eft obrigatório",53111:"banco eft não aceito",53115:"data de nascimento do comprador inválida",53117:"CPNJ do comprador inválido",53122:"domínio do email do comprador inválido. Você deve usar um email @sandbox.pagseguro.com.br",53140:"quantidade de parcelas fora do limite. O valor deve ser maior que zero",53141:"comprador bloqueado",53142:"token do cartão de crédito inválido",14007:"status da transação não permite reembolso"};function d(o,a){o.find(".card-validation").hide(),o.find("#card-"+a).show()}getCardFlag=function(o,a,e){d(e,"validating"),PagSeguroDirectPayment.getBrand({cardBin:a,success:function(a){var r=a.brand.name;o.css("background-image","url(https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/68x30/"+r+".png)"),e.find('input[name="card_brand"]').val(r),e.find('input[name="bank_name"]').val(r),d(e,"valid")},error:function(){o.css("background-image","url(https://metropolisrio.com.br/images/icons/credit.png)"),e.find('input[name="card_brand"]').val(""),d(e,"invalid")},complete:function(o){console.log(o)}})},createMasks=function(){$("input.cpf-field").inputmask("999.999.999-99"),$("input.cnpj-field").inputmask("99.999.999/9999-99"),$('input[name="card_number"]').inputmask("9999 9999 9999 9999"),$('input[name="cvv"]').inputmask("999[9]"),$('input[name="address_zip"]').inputmask("99.999-999")},$(document).ready(function(){createMasks(),PagSeguroDirectPayment.setSessionId(pagseguro.id),PagSeguroDirectPayment.getPaymentMethods({amount:500,success:function(o){console.log(o),$("#form-credit .cards, #form-debit .cards").html(""),$.each(o.paymentMethods.CREDIT_CARD.options,function(o,a){$("#form-credit .cards").append('<div class="m-1"><img src="https://stc.pagseguro.uol.com.br/'+a.images.MEDIUM.path+'"></div>')}),$.each(o.paymentMethods.ONLINE_DEBIT.options,function(o,a){$("#form-debit .cards").append('<div class="m-1"><img src="https://stc.pagseguro.uol.com.br/'+a.images.MEDIUM.path+'"></div>')})},error:function(o){console.log("O Pagseguro não conseguiu carregar as bandeiras dos cartões")},complete:function(o){console.log(o)}})}),$(document).on("blur",'input[name="card_number"]',function(){var o=$(this),a=o.cleanVal(),e=$($("button#submit").attr("data-target"));a.length>=6&&getCardFlag(o,a,e)}),$(document).on("keyup",'input[name="card_number"]',function(){var o=$(this),a=o.cleanVal(),e=$($("button#submit").attr("data-target"));6==a.length?getCardFlag(o,a,e):a.length<6&&(o.css("background-image","url(https://metropolisrio.com.br/images/icons/credit.png)"),e.find('input[name="card_brand"]').val(""),e.find("#card-invalid").hide())}),$(document).on("click","button#submit",function(o){var a=$(this),d=$(a.attr("data-target")),r=a.text();if(d.find('input[name="card_hash"]').val())return a.prop("disabled",!0),a.text("PROCESSANDO O SEU PEDIDO..."),void d.submit();d.find('input[name="card_number"]').val()?$('input[name="agree"]').prop("checked")?(a.prop("disabled",!0),a.text("PROCESSANDO O SEU PEDIDO..."),PagSeguroDirectPayment.createCardToken({cardNumber:d.find('input[name="card_number"]').cleanVal(),brand:d.find('input[name="card_brand"]').val(),cvv:d.find('input[name="cvv"]').val(),expirationMonth:d.find('select[name="expiry_month"] option:selected').val(),expirationYear:d.find('select[name="expiry_year"] option:selected').val(),success:function(o){var a=d.find('input[name="card_number"]').val().substr(d.find('input[name="card_number"]').val().length-4);d.find('input[name="card_token"]').val(o.card.token),d.find('input[name="card_lastfour"]').val(a),PagSeguroDirectPayment.onSenderHashReady(function(o){if("error"==o.status)return console.log(o.message),!1;console.log("Sender hash: "+o.senderHash),d.find('input[name="card_hash"]').val(o.senderHash),d.submit()})},error:function(o){alert(function(o){return(a=e[Object.keys(o.errors)[0]]).charAt(0).toUpperCase()+a.slice(1);var a}(o)),console.log(o),a.prop("disabled",!1),a.text(r)}})):alert("Você precisa aceitar os termos e condições para efetuar essa compra."):alert("Por favor preencha o número do cartão corretamente.")}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(o){$("button#submit").attr("data-target",$(o.target).attr("data-form"))}),$(document).on("blur",'input[name="address_zip"]',function(){var o=$(this).val().replace(/\D/g,"");if(""!=o){/^[0-9]{8}$/.test(o)?($('input[name="address_street"]').val("..."),$('input[name="address_district"]').val("..."),$('input[name="address_state"]').val("..."),$('input[name="address_city"]').val("..."),$.getJSON("https://viacep.com.br/ws/"+o+"/json/?callback=?",function(o){"erro"in o?($(".address-fields input").val(""),$(".zip-alert").hide(),$("#zip-invalid > div").text("CEP não encontrado").parent().show()):($('input[name="address_street"]').val(o.logradouro),$('input[name="address_district"]').val(o.bairro),$('input[name="address_state"]').val(o.uf),$('input[name="address_city"]').val(o.localidade),$(".zip-alert").hide(),$("#zip-valid > div").text("CEP válido!").parent().show())})):($(".address-fields input").val(""),$(".zip-alert").hide(),$("#zip-invalid > div").text("Formato de CEP inválido").parent().show())}else $(".address-fields input").val(""),$(".zip-alert").hide()}),$('input[name="select-card"]').on("change",function(){var o=$(this),a=o.attr("data-url"),e=o.parent().attr("data-target"),d=$("button#submit");$(".loading-icons").children().hide(),o.parent().siblings(".loading-icons").children(".text-grey").show(),d.is(":disabled")?console.log("Por favor espere a última operação se completar."):(d.add('input[name="select-card"]').prop("disabled",!0),$.get(a,function(a){if($("#card-preference .collapse").html(""),$(e).html(a),"existing-card-radio"==o.attr("id"))$('input[name="card_number"]'),$(d.attr("data-target"));else"new-card-radio"==o.attr("id")&&createMasks();o.parent().siblings(".loading-icons").children(".text-grey").hide(),o.parent().siblings(".loading-icons").children(".text-green").show()}).always(function(){d.add('input[name="select-card"]').prop("disabled",!1)}))})},2:function(o,a,e){o.exports=e("0ujA")}});